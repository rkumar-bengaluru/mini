{"version":3,"sources":["webpack://mini/webpack/universalModuleDefinition","webpack://mini/./src/app.js","webpack://mini/./src/mini/miniweb.js"],"names":["root","factory","exports","module","define","amd","this","mini","performsearch","document","getElementById","innerHTML","query","value","console","log","length","mini_head","result","search","response","forEach","r","ref","score","init","addEventListener","event","key","preventDefault","e","stack","message","lunr","json","MiNiWeb","siteIdxFile","idx","loadindex","Index","load","best10","i","push"],"mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAc,KAAID,IAElBD,EAAW,KAAIC,IARjB,CASGK,MAAM,WACT,O,wh2jBCPA,IAAIC,EAAO,I,MAAI,SAWf,SAASC,IACLC,SAASC,eAAe,SAASC,UAAY,GAC7C,IAAIC,EAAQH,SAASC,eAAe,qBAAqBG,MAEzD,GADAC,QAAQC,IAAI,UAAYH,GACV,KAAVA,GAAiC,IAAjBA,EAAMI,OAEtB,YADAP,SAASC,eAAe,SAASC,UAAY,8BAGjDF,SAASC,eAAe,aAAaC,UAVzCM,skBAYIR,SAASC,eAAe,qBAAqBG,MAAQD,EACrDE,QAAQC,IAAI,kBAAoBH,GAChC,IAAIM,EAASX,EAAKY,OAAOP,GACzBE,QAAQC,IAAI,mBAAqBG,EAAOF,QAExC,IAAII,EAAW,GACfF,EAAOG,SAAQ,SAAUC,QACJ,IAANA,IACPF,GAAY,uEACZA,GAAY,0DAA+DE,EAAEC,IAAM,KAAQD,EAAEC,IAAM,aACnGH,GAAY,2BAAgCE,EAAEC,IAAlC,qCAAsFD,EAAEC,IAAM,mBAC1GH,GAAY,wDACRE,EAAEE,MACFJ,GAAY,iCAAqCE,EAAEE,MAAQ,SAE3DJ,GAAY,yCAEhBA,GAAY,yBAGE,IAAlBF,EAAOF,QACPF,QAAQC,IAAI,UAAYG,EAAOF,QAC/BP,SAASC,eAAe,gBAAgBC,UAAY,+EAGpDG,QAAQC,IAAI,iBAAmBG,EAAOF,QACtCP,SAASC,eAAe,gBAAgBC,UAAYS,GAExDK,IAGJ,SAASA,IACL,IACIX,QAAQC,IAAIN,SAASC,eAAe,sBACpCD,SAASC,eAAe,qBAAqBgB,iBAAiB,SAAUC,IACpE,GAAkB,UAAdA,EAAMC,IAIN,OAHAd,QAAQC,IAAI,oBACZY,EAAME,sBACNrB,IAGJC,SAASC,eAAe,SAASC,UAAY,MAEjDF,SAASC,eAAe,mBAAmBgB,iBAAiB,SAAS,KACjElB,OAEN,MAAOsB,GACLhB,QAAQC,IAAIe,EAAEC,OACdtB,SAASC,eAAe,SAASC,UAAYmB,EAAEE,SAIvDP,K,wDC3EA,MAAMQ,EAAO,EAAQ,KACrB,IAAIC,EAAO,EAAQ,KAEJ,MAAMC,EAEjB,cACI7B,KAAK8B,YAAc,8BACnB9B,KAAK+B,IAAM/B,KAAKgC,YAChBxB,QAAQC,IAAI,qBAGhB,YAEI,OADUkB,EAAKM,MAAMC,KAAKN,GAI9B,OAAOtB,GACH,IACIE,QAAQC,IAAI,oBAAsBH,GAClC,IAAIM,EAASZ,KAAK+B,IAAIlB,OAAOP,GAC7BE,QAAQC,IAAI,8BAAgCG,EAAOF,QACnD,IAAIyB,EAAS,GACb,GAAsB,IAAlBvB,EAAOF,OACP,OAAOyB,EACX,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACpBD,EAAOE,KAAKzB,EAAOwB,IACvB,OAAOD,EACT,MAAOX,GAEL,MADAhB,QAAQC,IAAIe,EAAEC,OACRD,O","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mini\"] = factory();\n\telse\n\t\troot[\"mini\"] = factory();\n})(this, function() {\nreturn ","import css from \"./css/style.css\";\r\nimport MiNiWeb from './mini/miniweb';\r\n\r\nlet mini = new MiNiWeb();\r\nvar mini_head = '<div class=\\\"row\\\">';\r\nmini_head += '<div class=\\\"column\\\"><a href=\\'/mini\\'><img src=\\\"images/mini.svg\\\" alt=\\\"Mini\\\" class=\\\"mini_logo_small\\\"></a></div>';\r\nmini_head += '<div class=\\\"column\\\"><div class=\\\"search-btns\\\"><div class=\\\"mini-search-bar\\\"><input id=\\'mini-search-input\\' type=\\\"text\\\" autofocus>';\r\nmini_head += '<div class=\\\"mic_space\\\"> <img src=\\\"images/m-mic.png\\\" alt=\\\"Mic\\\" class=\\\"mic_icon\\\"> </div>';\r\nmini_head += '</div></div></div>';\r\nmini_head += '<div class=\\\"column\\\"><div class=\\\"mini-search-btns\\\"><div class=\\\"mini-btns-centered\\\">';\r\nmini_head += '<button id=\\\"mini-btn-search\\\" >Mini Search</button><br><span class=\\\"mini-error btns_centered\\\" id=\\'error\\'></span>';\r\nmini_head += ' </div></div></div>';\r\nmini_head += '</div>';\r\n\r\nfunction performsearch() {\r\n    document.getElementById('error').innerHTML = '';\r\n    var query = document.getElementById('mini-search-input').value;\r\n    console.log('query =' + query);\r\n    if (query === '' || query.length === 0) {\r\n        document.getElementById('error').innerHTML = 'please enter a valid query'\r\n        return;\r\n    }\r\n    document.getElementById('mini-head').innerHTML = mini_head;\r\n\r\n    document.getElementById('mini-search-input').value = query;\r\n    console.log('search query...' + query);\r\n    let result = mini.search(query);\r\n    console.log('response size...' + result.length);\r\n\r\n    var response = '';\r\n    result.forEach(function (r) {\r\n        if (typeof r !== 'undefined') {\r\n            response += '<div class=\\\"mini-result-row\\\"><div class=\\\"row\\\"><div class=\\'column\\'>';\r\n            response += '<div class=\\\"mini-result-src\\\"><a target=\\'_blank\\'href=\\'' + r.ref + '\\'>' + r.ref + '</a></div>';\r\n            response += '<a target=\\'_blank\\'href=\\'' + r.ref + '\\'>' + '<div class=\\\"mini-result-title\\\">' + r.ref + '</div></a></div>';\r\n            response += '<div class=\\\"mini-result-desc\\\">' + 'description to do' + '</div>';\r\n            if (r.score) {\r\n                response += '<div class=\\\"mini-result-meta\\\">' + r.score + '</div>';\r\n            } else {\r\n                response += '<div class=\\\"mini-result-meta\\\">' + 'NA' + '</div>';\r\n            }\r\n            response += '</div></div></div>';\r\n        }\r\n    });\r\n    if (result.length === 0) {\r\n        console.log('no data' + result.length);\r\n        document.getElementById('mini-results').innerHTML = '<span class=\\\"mini-error\\\">Sorry no results matching your criteria...</span>';\r\n\r\n    } else {\r\n        console.log('no of results ' + result.length);\r\n        document.getElementById('mini-results').innerHTML = response;\r\n    }\r\n    init();\r\n}\r\n\r\nfunction init() {\r\n    try {\r\n        console.log(document.getElementById('mini-search-input'));\r\n        document.getElementById('mini-search-input').addEventListener('keyup', (event) => {\r\n            if (event.key === 'Enter') {\r\n                console.log('enter clicked...');\r\n                event.preventDefault();\r\n                performsearch();\r\n                return;\r\n            }\r\n            document.getElementById('error').innerHTML = '';\r\n        })\r\n        document.getElementById('mini-btn-search').addEventListener('click', () => {\r\n            performsearch();\r\n        })\r\n    } catch (e) {\r\n        console.log(e.stack);\r\n        document.getElementById('error').innerHTML = e.message;\r\n    }\r\n}\r\n\r\ninit();\r\n","\r\nconst lunr = require(\"lunr\");\r\nlet json = require('../../index/vlocalshop-index.json');\r\n\r\nexport default class MiNiWeb {\r\n\r\n    constructor() {\r\n        this.siteIdxFile = 'index/vlocalshop-index.json';\r\n        this.idx = this.loadindex();\r\n        console.log('loaded in browser');\r\n    }\r\n\r\n    loadindex() {\r\n        var idx = lunr.Index.load(json);\r\n        return idx;\r\n    }\r\n\r\n    search(query) {\r\n        try {\r\n            console.log('query from mini -' + query);\r\n            var result = this.idx.search(query);\r\n            console.log('response length from mini -' + result.length);\r\n            var best10 = [];\r\n            if (result.length === 0)\r\n                return best10;\r\n            for (var i = 0; i < 10; i++)\r\n                best10.push(result[i]);\r\n            return best10;\r\n        } catch (e) {\r\n            console.log(e.stack);\r\n            throw e;\r\n        }\r\n    }\r\n}"],"sourceRoot":""}